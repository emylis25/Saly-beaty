<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Formulario Cita</title>
</head>
<body>
<h1 th:text="${cita.id} != null ? 'Editar Cita' : 'Nueva Cita'"></h1>

<form th:action="@{${formAction}}" th:object="${cita}" method="post">

  <!-- Cliente (solo lectura) -->
  <label>Cliente:</label>
  <input type="text" th:value="${cliente.nombre}" readonly/>
  <br><br>

  <label>Correo:</label>
  <input type="text" th:value="${cliente.correo}" readonly/>
  <br><br>

  <label>Tel√©fono:</label>
  <input type="text" th:value="${cliente.telefono}" readonly/>
  <br><br>

  <!-- Fecha y hora -->
  <label>Fecha y Hora:</label>
  <input type="datetime-local" th:field="*{fechaHora}" required/>
  <br><br>

  <!-- Trabajador -->
  <label>Trabajador:</label>
  <select th:field="*{trabajador.id}" required>
    <option th:if="${cita.trabajador == null || cita.trabajador.id == null}" value="" disabled selected>Seleccione</option>
    <option th:each="trab : ${trabajadores}"
            th:value="${trab.id}"
            th:text="${trab.nombre}"
            th:selected="${cita.trabajador != null} ? ${trab.id} == ${cita.trabajador.id} : false">
    </option>
  </select>
  <br><br>

  <!-- Servicio -->
  <label>Servicio:</label>
  <select th:field="*{servicio.id}" required>
    <option th:if="${cita.servicio == null || cita.servicio.id == null}" value="" disabled selected>Seleccione</option>
    <option th:each="ser : ${servicios}"
            th:value="${ser.id}"
            th:text="${ser.nombreServicio}"
            th:selected="${cita.servicio != null} ? ${ser.id} == ${cita.servicio.id} : false">
    </option>
  </select>
  <br><br>

  <button type="submit">Guardar</button>
</form>

</body>
</html>
